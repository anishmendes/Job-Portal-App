!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new e.Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="975f48da-c2ac-4bb5-97af-6ce882f4fca6",e._sentryDebugIdIdentifier="sentry-dbid-975f48da-c2ac-4bb5-97af-6ce882f4fca6")}catch(e){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8696],{36987:function(e,n,t){t.d(n,{Nb:function(){return l},YS:function(){return i},aD:function(){return c},tw:function(){return s},xr:function(){return a}}),t(2935),t(41866),t(40923),t(48969);var r=t(22319),c="_1286nb12u6 _1286nb12uu _1286nb14l6 _1286nb14mi _1286nb14nu _1286nb14p6 _1286nb19i _1286nb181m _1286nb187j _1286nb13a6 _1286nb13hi _1286nb16iv _1286nb18v",a="_1286nb16w4",l="_1286nb1h _1286nb1k _1286nb14l6 _1286nb14mi _1286nb14nu _1286nb14p6 _1286nb18v _1286nb18nd _1286nb118i _1286nb19i _1286nb12w0",s="_m87f4j2 _1286nb12ji _1286nb129i _1286nb1246 _1286nb12e6 _1286nb12yi _1286nb133i _1286nb17am _1286nb181s _1286nb18n _1286nb12ou _1286nb16iv _1286nb19i _1286nb12u6",i=(0,r.c)({defaultClassName:"_1rgts1f4 _1286nb12yi _1286nb133i _1286nb1a6 _1286nb1bu _1286nb1k6 _1286nb19i _1286nb12w0 _1286nb118",variantClassNames:{calculating:{true:"_1286nb15hs",false:"_1rgts1f3 _1286nb15hs"}},defaultVariants:{calculating:!1},compoundVariants:[]})},27923:function(e,n,t){t.r(n),t.d(n,{AddToCollection:function(){return ei}});var r=t(97458),c=t(52956),a=t(99041),l=t(86313),s=t(19938),i=t(60889),o=t(92901),u=t(73418),d=t(32453),b=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:(0,r.jsx)("path",{d:"M437 90H208.3c-6.8-28.6-32.6-50-63.3-50H75c-35.8 0-65 29.2-65 65v302c0 35.8 29.2 65 65 65h362c35.8 0 65-29.2 65-65V155c0-35.8-29.2-65-65-65M334 308h-53v53c0 13.8-11.2 25-25 25s-25-11.2-25-25v-53h-53c-13.8 0-25-11.2-25-25s11.2-25 25-25h53v-53c0-13.8 11.2-25 25-25s25 11.2 25 25v53h53c13.8 0 25 11.2 25 25s-11.2 25-25 25"})}),_=t(32748),h=t(77666),f=t(36987);let m=e=>{let{isCollapsed:n,added:t,onClick:c,mode:a}=e,{t:m}=(0,_.$G)("common"),v=(0,s.a)("lg"),g=(0,i.nD)(),p=m(t?"addedToCollection":"addToCollection"),j=(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.T,{children:p}),(0,r.jsx)(o.J,{as:t?b:d.Z,size:"base",color:t?"blueFreepik":void 0})]});if("large"===a){let e=(0,r.jsxs)("button",{className:h.LI(),onClick:c,children:[j,(0,r.jsx)("span",{className:h.PS(),children:p})]});return v?(0,r.jsx)(l.u,{side:"top",trigger:e,triggerAsChild:!0,hideOnLeaveHover:!0,container:g.current,children:p}):e}return(0,r.jsxs)("button",{className:n?f.tw:f.aD,onClick:c,children:[j,n&&(0,r.jsx)("span",{children:p})]})};var v=t(81801),g=t(93962),p=t.n(g);t(2935),t(41866),t(22420);var j=t(22319),x="_c4jkjma _c4jkjm1 _1286nb19i _1286nb1m _1286nb12w0 _1286nb1246 _1286nb1296 _1286nb12e6 _1286nb12j6 _1286nb14gi _1286nb14hc _1286nb14ii _1286nb14ji _1286nb13ec _1286nb14z8",y="_1286nb19i",C="_c4jkjmc _1286nb1j _1286nb11pu",w=(0,j.c)({defaultClassName:"_c4jkjmh _c4jkjme _1286nb14ii _1286nb1ac _1286nb13ec _1286nb19i _1286nb12vc _1286nb12u6 _1286nb129c _1286nb14yk _1286nb12s0",variantClassNames:{active:{true:"_1286nb15s4",false:"_1286nb16iv"}},defaultVariants:{active:!1},compoundVariants:[]}),k=t(52983);let N=(0,k.createContext)({}),S=()=>(0,k.useContext)(N);var E=t(25735),T=t(88711),I=t(42679);let R=()=>{let e=Array.from({length:5},(e,n)=>n);return(0,r.jsx)(T.x,{marginBottom:"20",overflowY:"auto",children:e.map(e=>(0,r.jsx)(T.x,{className:w(),children:(0,r.jsx)(I.O.Rect,{height:20})},e))})},D=()=>{let{t:e}=(0,_.$G)("collections");return(0,r.jsx)("div",{className:C,children:(0,r.jsx)("p",{children:e("noCollectionsAvailable")})})};var G=t(51835),O=t(81875);let P=e=>{var n;return{id:e.id,name:e.name,author:(null===(n=e.author)||void 0===n?void 0:n.name)||void 0,hasResourceInCollection:e.hasResourceInCollection}};var A=t(48294),L=t(83598);let B=e=>{let{collections:n,isSelected:t,onSelect:c}=e,{t:a}=(0,_.$G)("common");return n&&0!==n.length?(0,r.jsx)("div",{className:C,children:n.map(e=>{let n=e.id&&(null==t?void 0:t.includes(e.id))||!1;return(0,r.jsxs)("button",{className:w({active:n}),onClick:()=>{c(e)},children:[(0,r.jsx)("span",{children:e.name}),n&&(0,r.jsx)(o.J,{as:A.Z}),(0,r.jsxs)("span",{className:"_c4jkjml _1286nb12yi _1286nb133i _1286nb1a6 _1286nb1kc _1286nb16d4 _1286nb12oo _1286nb19i _1286nb12u6 _1286nb18nd _1286nb15hs",children:[n?a("remove"):a("select"),(0,r.jsx)(o.J,{as:n?L.Z:A.Z})]})]},e.id)})}):(0,r.jsx)(D,{})},J=e=>{let{userCollectionsResult:n}=e,t=(0,G.Zl)(O.SC),c=(0,G.sJ)(O.oD),{data:a}=n,l=a.filter(e=>"owned"===e.ownership),{handleCollectionSelection:s,collectionsSelected:i}=S();return(0,k.useEffect)(()=>{""===c&&t(n)},[c,t,n]),(0,r.jsx)(B,{collections:l.map(P),onSelect:s,isSelected:i.map(e=>e.id)})},V=e=>{let{id:n}=e,{loadable:t}=(0,E.b)({page:1,resourceId:n});return"hasError"===t.state?(0,r.jsx)(D,{}):"loading"===t.state?(0,r.jsx)(R,{}):"hasValue"===t.state?(0,r.jsx)(J,{userCollectionsResult:t.contents}):(0,r.jsx)(R,{})},Z=e=>{let{onCreate:n}=e,[t,c]=(0,k.useState)(""),{t:a}=(0,_.$G)("common");return(0,r.jsxs)("div",{className:y,children:[(0,r.jsx)("input",{type:"text",className:x,placeholder:"".concat(a("createNewCollection")),value:t,onChange:e=>{c(e.target.value)},onKeyDown:e=>{"Enter"===e.key&&(n(t),c(""))}}),(0,r.jsx)(v.f5,{color:"blue",radius:"none",onClick:()=>{n(t),c("")},children:(0,r.jsx)(T.x,{as:"span",lineHeight:"tight",children:a("addCollection")})})]})};var $=t(17417),z=t(34606);let H=e=>{let{openToast:n}=(0,$.x_)(),{t}=(0,_.$G)("collections"),{refresh:r}=(0,E.b)({page:1,resourceId:e});return{handleCreate:(0,k.useCallback)(async e=>{0!==e.length&&((await (0,z.B)({name:e,description:"",type:"private"})).success?n({type:"success",message:t("collectionCreatedSuccessfully")}):n(),r())},[r,n,t])}},U=()=>{let{data:e,meta:{pagination:{nextPage:n}}}=(0,G.sJ)(O.SC);return{collections:e,nextPage:n}};var Q=t(94669);let M=e=>{let{placeholder:n,onSearch:t}=e;return(0,r.jsxs)(T.x,{className:y,marginBottom:"20",children:[(0,r.jsx)("input",{type:"text",className:x,placeholder:n,onChange:e=>{t(e.target.value)}}),(0,r.jsx)(v.f5,{color:"blue",radius:"none",children:(0,r.jsx)(o.J,{as:Q.Z})})]})},F=e=>{let{type:n,id:t,preview:c}=e,{t:a}=(0,_.$G)("common"),{collections:l}=U(),{isDirty:s,handleSaveChanges:i,handleSearch:o,isSearchByApi:u}=S(),{handleCreate:d}=H(t),b=l.length>=8||u;return(0,r.jsxs)("div",{className:"_1286nb19i _1286nb18nd",children:[(0,r.jsx)("div",{className:"_1286nb1ac _1286nb190 _1286nb19l _1286nb12uu _1286nb12u6 _1286nb13cc",children:"icon"!==n?(0,r.jsx)(p(),{src:c,className:"_1286nb17",alt:"preview",fill:!0}):(0,r.jsx)(p(),{src:c,alt:"preview",width:128,height:128})}),(0,r.jsxs)("div",{className:"_c4jkjm6 _c4jkjm1 _1286nb19i _1286nb1m _1286nb12w0 _1286nb124u _1286nb129o _1286nb12eo _1286nb12jo _1286nb12vc _1286nb12t0 _1286nb16iv",children:[(0,r.jsx)("p",{className:"_1286nb12o6 _1286nb12s0 _1286nb11po",children:a("addToCollection")}),(0,r.jsxs)("div",{className:"_c4jkjm1 _1286nb19i _1286nb1m _1286nb12w0",children:[b&&(0,r.jsx)(M,{placeholder:"".concat(a("search")),onSearch:o}),(0,r.jsx)(V,{id:t,preview:c,type:n})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(Z,{onCreate:d}),(0,r.jsx)(v.gg,{color:"blue",marginTop:"20",radius:"xs",block:!0,onClick:i,disabled:!s,children:a("saveChanges")})]})]})]})};var X=t(62168);let Y=()=>{let e=(0,X.PN)();return(0,k.useCallback)(n=>{let{collectionId:t,collectionName:r,fileId:c,location:a}=n;e({collection_id:t,collection_name:r,event_name:"add_to_collection",event:"ga4event",file_id:c,location:a})},[e])};var K=t(2236);let W=async e=>{let{id:n,collectionId:t,resourceType:r}=e;return await (0,K.c)("/api/user/resources/".concat(n,"/collections"),"DELETE",{collectionId:t,resourceType:r})},q=async e=>{let{id:n,collectionId:t,resourceType:r}=e;return await (0,K.c)("/api/user/resources/".concat(n,"/collections"),"POST",{collectionId:t,resourceType:r})};var ee=t(21696);let en=e=>{let{type:n,id:t,location:r}=e,[c,a]=(0,k.useState)([]),[l,s]=(0,k.useState)([]),[i,o]=(0,k.useState)([]),{collections:u}=U(),d=(0,G.Zl)((0,ee.cO)({type:n,id:t})),{refresh:b}=(0,E.b)({page:1,resourceId:t}),{openToast:h}=(0,$.x_)(),{t:f}=(0,_.$G)("collections"),m=Y(),v=(0,k.useMemo)(()=>(null==u?void 0:u.length)>0?u.filter(e=>e.hasResourceInCollection).map(P):[],[u]);(0,k.useEffect)(()=>{(null==u?void 0:u.length)>0&&o(v)},[u,v]);let g=c.length>0||l.length>0,p=(0,k.useCallback)(async()=>{if(0===c.length&&0===l.length)return;let e=[];c.length>0&&e.push(q({id:t,collectionId:c.map(e=>e.id),resourceType:n})),l.length>0&&e.push(W({id:t,collectionId:l.map(e=>e.id),resourceType:n}));try{(await Promise.all(e)).every(e=>null==e?void 0:e.success)?(c.forEach(e=>{m({fileId:t,collectionId:e.id,collectionName:e.name,location:r})}),a([]),s([]),h({type:"success",message:f("changesSavedSuccessfully")}),d((null==i?void 0:i.length)===0)):h(),b()}catch(e){h()}},[null==i?void 0:i.length,c,l,t,r,b,m,d,h,f,n]),j=e=>{let{array:n,collection:t}=e;return n.map(e=>e.id).includes(t.id)?n.filter(e=>e.id!==t.id):[...n,t]},x=(0,k.useCallback)(async e=>{o(n=>j({array:n,collection:e}))},[]);return{isDirty:g,collectionsSelected:i,handleCollectionSelection:(0,k.useCallback)(async e=>{x(e),u.some(n=>n.id===e.id&&n.hasResourceInCollection)?s(n=>j({array:n,collection:e})):a(n=>j({array:n,collection:e}))},[u,x]),handleSaveChanges:p}},et=()=>{let{collections:e,nextPage:n}=U(),[t,r]=(0,k.useState)([]),c=(0,G.Zl)(O.oD),a=(0,k.useRef)();(0,k.useEffect)(()=>{(null==e?void 0:e.length)>0&&r(e.map(P))},[e,n]);let l=null!==n,s=n=>{r((null==e?void 0:e.filter(e=>e.name.toLowerCase().includes(n.toLowerCase()))).map(P))},i=async e=>{a.current&&clearTimeout(a.current),a.current=setTimeout(async()=>{c(e)},350)};return{isSearchByApi:l,searchCollections:t,handleSearch:e=>{l?i(e):s(e)}}},er=e=>{let{children:n,id:t,type:c,location:a}=e,{collectionsSelected:l,handleCollectionSelection:s,handleSaveChanges:i,isDirty:o}=en({type:c,id:t,location:a}),{searchCollections:u,isSearchByApi:d,handleSearch:b}=et();return(0,r.jsx)(N.Provider,{value:{collectionsSelected:l,searchCollections:u,isSearchByApi:d,isDirty:o,handleCollectionSelection:s,handleSearch:b,handleSaveChanges:i},children:n})};var ec=t(96005),ea=t(42011);let el=()=>{let e=(0,X.PN)();return(0,k.useCallback)(n=>{let{location:t,fileId:r}=n;e({event:"ga4event",event_name:"collect",location:t,file_id:r})},[e])},es=e=>{let{id:n,type:t,location:r}=e,{t:c}=(0,_.$G)("error"),a=(0,G.sJ)((0,ee.cO)({id:n,type:t})),l=(0,G.rb)(O.oD),[s,i]=(0,k.useState)(!1),o=(0,ea.d)(),{loginUrl:u,setLoginCookies:d}=(0,ec.J)(),{openToast:b}=(0,$.x_)(),h=(0,G.C)((0,O.Az)({page:1,resourceId:n,searchTerm:""})),f=el();return{added:a,showModal:s,setShowModal:i,onClick:()=>{if(!o){d(),window.location.href=u;return}h(),i(!0),f({location:r,fileId:n})},handleError:e=>{console.error(e),b({type:"danger",message:c("unknown")}),i(!1)},handleOpenChange:()=>{l(),i(!1)}}},ei=e=>{let{type:n,id:t,preview:l,mode:s,location:i}=e,{added:o,showModal:u,handleOpenChange:d,onClick:b}=es({id:t,type:n,location:i}),_=(0,a.U)().isCollapsed;return u?(0,r.jsx)(c.u,{open:u,onOpenChange:d,thumbnail:!0,children:(0,r.jsx)(er,{id:t,type:n,location:i,children:(0,r.jsx)(F,{type:n,id:t,preview:l})})}):(0,r.jsx)(m,{isCollapsed:_,onClick:b,added:o,mode:null!=s?s:"normal"})}},34606:function(e,n,t){t.d(n,{B:function(){return c}});var r=t(2236);let c=e=>{let{name:n,description:t,type:c}=e;return(0,r.c)("/api/user/collections","POST",{name:n,...t&&{description:t},...c&&{type:c}})}},70831:function(e,n,t){t.d(n,{X:function(){return c}});var r=t(2236);let c=e=>{let{page:n,resourceId:t,searchTerm:c,collectionIds:a,ownership:l}=e,s=a?a.join(","):void 0,i={page:"".concat(n),...t&&{resourceId:"".concat(t)},...c&&{"filter[term]":c},...s&&{"filter[ids]":s},...l&&{"filter[ownership]":l}},o="/api/user/collections?".concat(new URLSearchParams(i));return(0,r.c)(o,"GET")}},25735:function(e,n,t){t.d(n,{b:function(){return l}});var r=t(52983),c=t(51835),a=t(81875);let l=e=>{let{page:n=1,resourceId:t}=e,[l,s]=(0,r.useState)(parseInt(String(Date.now()/3e4))),i=(0,c.sJ)(a.oD),o=(0,c.$P)((0,a.Az)({page:n,resourceId:t,searchTerm:i})),u=(0,c.C)((0,a.Az)({page:n,resourceId:t,searchTerm:i}));return(0,r.useEffect)(()=>{let e=parseInt(String(Date.now()/3e4));e!==l&&(s(e),u())},[l,u]),{loadable:o,refresh:u}}},21696:function(e,n,t){t.d(n,{y8:function(){return d},cO:function(){return o},Mg:function(){return u},gW:function(){return i}});var r=t(41843),c=t(51835),a=t(2236);let l=e=>{let{id:n,page:t=1,locale:r="en"}=e;return(0,a.c)("/api/collections/".concat(n,"/resources?page=").concat(t,"&lang=").concat(r),"GET")},s=e=>{let{id:n,page:t=1,locale:r="en"}=e;return(0,a.c)("/api/user/collections/".concat(n,"/resources?page=").concat(t,"&lang=").concat(r),"GET")},i=(0,c.cn)({key:"userCollectionResourcesStoreState",default:[]}),o=(0,c.CG)({key:"isResourceInUserCollectionState",get:e=>{let{id:n,type:t}=e;return e=>{let{get:c}=e,a=c(r.Xx);return!!a&&"id"in a&&c(i).some(e=>e.id===n&&e.type===t)}},set:e=>{let{id:n,type:t}=e;return(e,r)=>{let{get:c,set:a}=e,l=c(i);a(i,r?l.filter(e=>e.id!==n):[...l,{id:n,type:t}])}}}),u=(0,c.CG)({key:"resourcesQuery",get:e=>{let{page:n,id:t,locale:r}=e;return async()=>{let{data:e,success:c}=await s({page:n,id:t,locale:r});if(!c)throw e;return e}}}),d=(0,c.CG)({key:"resourcesQuery",get:e=>{let{page:n,id:t,locale:r}=e;return async()=>{let{data:e,success:c}=await l({page:n,id:t,locale:r});if(!c)throw e;return e}}})},81875:function(e,n,t){t.d(n,{Lg:function(){return b},by:function(){return _},hD:function(){return m},Az:function(){return u},lm:function(){return h},u_:function(){return f},oD:function(){return o},SC:function(){return d}});var r=t(51835),c=t(70831),a=t(2236);let l=e=>(0,a.c)("/api/user/collections/".concat(e),"GET"),s=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en";return(0,a.c)("/api/collections/trends?locale=".concat(e),"GET")},i=e=>(0,a.c)("/api/collections?id=".concat(e),"GET"),o=(0,r.cn)({key:"searchTermState",default:""}),u=(0,r.CG)({key:"collectionsQuery",get:e=>{let{page:n,resourceId:t,searchTerm:r}=e;return async()=>{let{data:e,success:a}=await (0,c.X)({page:n,resourceId:t,searchTerm:r});if(!a)throw Error(e);return e}}}),d=(0,r.cn)({key:"userCollectionStoreState",default:{data:[],meta:{pagination:{nextPage:null,perPage:0,prevPage:null,currentPage:0}}}}),b=(0,r.CG)({key:"collectionQuery",get:e=>{let{id:n}=e;return async()=>{let{data:e,success:t}=await l(n);if(!t)throw Error(e);return e}}}),_=(0,r.CG)({key:"collectionRelatedQuery",get:e=>{let{term:n,locale:t}=e;return async()=>{let e=new URLSearchParams({locale:t,...n&&{term:n}}).toString(),r=await fetch("/api/regular/search?".concat(e));if(!r.ok)throw Error(r.statusText);return r.json()}}}),h=(0,r.CG)({key:"collectionQuery",get:e=>{let{id:n}=e;return async()=>{let{data:e,success:t}=await i(n);if(!t)throw"FORBIDDEN"===e?"COLLECTION_FORBIDDEN":e;return e}},cachePolicy_UNSTABLE:{eviction:"lru",maxSize:15}}),f=(0,r.cn)({key:"followedCollectionsState",default:[]}),m=(0,r.CG)({key:"collectionTrendsQuery",get:e=>{let{locale:n}=e;return async()=>{let{data:e,success:t}=await s(n);if(!t)throw Error(e);return e}}})},99041:function(e,n,t){t.d(n,{T:function(){return l},U:function(){return s}});var r=t(97458),c=t(52983);let a=(0,c.createContext)({isCollapsed:null}),l=e=>{let{isCollapsed:n,children:t}=e;return(0,r.jsx)(a.Provider,{value:{isCollapsed:n},children:t})},s=()=>(0,c.useContext)(a)},2236:function(e,n,t){t.d(n,{c:function(){return r}});let r=async(e,n,t)=>fetch(e,{method:n,...t&&{body:JSON.stringify(t)}}).then(async e=>e.ok?{success:!0,data:204===e.status?null:await e.json()}:400===e.status?{success:!1,data:e.statusText}:401===e.status||405===e.status?{success:!1,data:"AUTHENTICATION_ERROR"}:403===e.status?{success:!1,data:"FORBIDDEN"}:500===e.status?{success:!1,data:"INTERNAL_SERVER_ERROR"}:{success:!1,data:await e.json()})},32453:function(e,n,t){var r=t(97458);n.Z=e=>(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",width:16,height:16,"aria-hidden":!0,...e,children:[(0,r.jsx)("path",{d:"M437 90H208.3c-6.8-28.6-32.6-50-63.3-50H75c-35.8 0-65 29.2-65 65v302c0 35.8 29.2 65 65 65h362c35.8 0 65-29.2 65-65V155c0-35.8-29.2-65-65-65m15 317c0 8.3-6.7 15-15 15H75c-8.3 0-15-6.7-15-15V105c0-8.3 6.7-15 15-15h70c8.3 0 15 6.7 15 15v10c0 13.8 11.2 25 25 25h252c8.3 0 15 6.7 15 15z"}),(0,r.jsx)("path",{d:"M334 258h-53v-53c0-13.8-11.2-25-25-25s-25 11.2-25 25v53h-53c-13.8 0-25 11.2-25 25s11.2 25 25 25h53v53c0 13.8 11.2 25 25 25s25-11.2 25-25v-53h53c13.8 0 25-11.2 25-25s-11.2-25-25-25"})]})},40556:function(e,n,t){t.d(n,{h:function(){return r}});let r=e=>e?"".concat(e[0].toUpperCase()).concat(e.slice(1)):e}}]);