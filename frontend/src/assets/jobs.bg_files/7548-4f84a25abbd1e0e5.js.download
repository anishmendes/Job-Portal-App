!function(){try{var n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},e=(new n.Error).stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="1650fa4a-f3db-4fe9-8ac3-df4482a567a9",n._sentryDebugIdIdentifier="sentry-dbid-1650fa4a-f3db-4fe9-8ac3-df4482a567a9")}catch(n){}}();"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7548],{7548:function(n,e,l){l.d(e,{j:function(){return k}});var a=l(97458),o=l(32748);l(2935),l(41866),l(11875);var t=l(22319),b=(0,t.c)({defaultClassName:"_bglng85 _1286nb12ji _1286nb129i _1286nb1246 _1286nb12e6 _1286nb14l0 _1286nb14mc _1286nb14no _1286nb14p0 _1286nb12s0 _1286nb12oo _1286nb13q6 _1286nb119",variantClassNames:{mode:{follow:"_bglng82 _1286nb16iv _1286nb181m _1286nb187j",following:"_bglng84 _1286nb16iv _1286nb16qj _1286nb181m _1286nb18fa"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),i=(0,t.c)({defaultClassName:"_bglng8e _bglng89 _1286nb119",variantClassNames:{mode:{follow:"_bglng8b _1286nb16iv",following:"_bglng8d _1286nb16iv _1286nb16qj"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),s=(0,t.c)({defaultClassName:"_bglng8m _1286nb12jc _1286nb129c _1286nb1240 _1286nb12e0 _1286nb14gi _1286nb14hi _1286nb14ii _1286nb14ji _1286nb14ku _1286nb14m6 _1286nb14ni _1286nb14ou _1286nb12t0 _1286nb12s0 _1286nb1528 _1286nb119 _1286nb12rc",variantClassNames:{mode:{follow:"_bglng8j _1286nb16w4",following:"_bglng8l _1286nb16w4"}},defaultVariants:{mode:"follow"},compoundVariants:[]}),r="_bglng8p",_=l(96005),f=l(42011),d=l(17417),c=l(52983),u=l(51835),w=l(41843);let g=async()=>{let n=await fetch("/api/social/follow");if(!n.ok)throw Error();return await n.json()},m=(0,u.cn)({key:"userFollowsState",default:[],effects:[n=>{let{setSelf:e}=n;(async()=>{let n=async()=>await g();e(await n())})()}]}),h=(0,u.CG)({key:"authorUserFollow",get:n=>{let{id:e}=n;return n=>{let{get:l}=n,a=l(w.Xx);return!!a&&"id"in a&&l(m).includes(e)}},set:n=>{let{id:e}=n;return(n,l)=>{let{get:a,set:o}=n,t=a(m);o(m,l?t.filter(n=>n!==e):[...t,e])}}}),y=async(n,e)=>{if(!(await fetch("/api/social/follow?id=".concat(e),{method:n?"DELETE":"PUT"})).ok)throw Error("There was a problem toggling the follow")};var p=l(62168);let v=(n,e)=>{let l=(0,p.PN)(),a={event:"ga4event",event_name:"follow_author",action:"follow_author",author_name:n,location:e,category:"follow-contributor"};return()=>l(a)},j=(n,e,l)=>{let[a,o]=(0,c.useState)(!0),{openToast:t}=(0,d.x_)(),{loginUrl:b,setLoginCookies:i}=(0,_.J)(),s=(0,f.d)(),[r,w]=(0,u.FV)(h({id:n})),g=v(e,l),m=(0,c.useCallback)(()=>{if(!s){i(),window.location.href=b;return}o(!1),y(r,n).then(()=>w(r)).then(()=>!r&&g()).catch(()=>t()).finally(()=>o(!0))},[s,r,n,i,b,w,g,t]);return{following:r,disabled:!a,onClick:m}},k=n=>{let{id:e,name:l,location:t,buttonStyle:_="button"}=n,{t:f}=(0,o.$G)("common"),{following:d,onClick:c,disabled:u}=j(e,l,t),w={inline:i,outline:s,button:b};return d?(0,a.jsxs)("button",{className:w[_]({mode:"following"}),onClick:c,disabled:u,children:[(0,a.jsx)("span",{className:r,children:f("following")}),(0,a.jsx)("span",{className:r,children:f("unfollow")})]}):(0,a.jsx)("button",{className:w[_]({mode:"follow"}),onClick:c,disabled:u,children:f("follow")})}}}]);